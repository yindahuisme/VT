<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>vt</title>
    <!-- element-ui css -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- 自定义css -->
    <link type="text/css" rel="styleSheet" href="./css/vt.css" />
    <!-- axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- adobe cep 桥接 -->
    <script src="./js/adobe/CSInterface.js"></script>
    <!-- vue -->
    <script src="./js/vue/vue.js"></script>
    <script>
        // 关闭生产提示
        Vue.config.productionTip = false
        // 关闭全局右键菜单
        document.oncontextmenu = () => {
            return false
        }
    </script>
    <!-- vuex -->
    <script src="https://unpkg.com/vuex@3.1.0/dist/vuex.js"></script>
    <!-- element-ui -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <!-- 音频波形可视化 -->
    <script src="./js/wavesurfer/wavesurfer.js"></script>
    <script>
        // 安装vue插件
        Vue.use(Vuex)
    </script>

</head>

<body>
    <div id="app">
        <vtComponent></vtComponent>
    </div>
</body>

<template id="vt">
    <div v-loading="vtIsLoading" :element-loading-text="vtLoadingText" element-loading-spinner="el-icon-loading"
        element-loading-background="rgba(255, 255, 255, 0.8)">
        <!-- 内容头 -->
        <div id="vt_header">
            <!-- 内容头-卡片 -->
            <el-card class="box-card">
                <!-- 项目logo -->
                <img src="./imgs/header_ico.png">
                <!-- 项目名 -->
                <div>{{vtTitle}}</div>
                <!-- 设置 -->
                <settingComponent></settingComponent>
                <!-- 字幕 -->
                <el-button circle>
                    字幕
                </el-button>
            </el-card>

        </div>
        <!-- 内容区 -->
        <div id="vtMain">
            <matFileComponent></matFileComponent>
            <preComponent></preComponent>
            <infoComponent></infoComponent>
            <matComponent></matComponent>
        </div>
    </div>
</template>

<!-- 素材文件组件-模板代码 -->
<template id="matFileTemplate">
    <div id="matFile">
        <!-- 素材文件组件-卡片 -->
        <el-card class="box-card">
            <!-- 卡片头 -->
            <div slot="header" class="clearfix">
                <!-- sql筛选下拉框 -->
                <el-select title="sql筛选下拉框" size="mini" @change="matFileSqlMenuChangeEvent"
                    v-model="matFileSqlMenuCurOption" filterable allow-create default-first-option>
                    <el-option v-for="item in matFileSqlMenuOptions" :key="item.label" :label="item.label"
                        :value="item.label">
                    </el-option>
                </el-select>

                <!-- 编辑素材文件筛选sql按钮，编辑面板 -->
                <el-button title="sql编辑按钮" icon="el-icon-edit" @click="matFileSqlEditButtonClick" circle>
                </el-button>
                <el-dialog title="素材文件筛选sql编辑" :visible.sync="matFileHeaderEditDialogVisible">
                    <el-input type="textarea" placeholder="请输入内容" v-model="matFileHeaderEditDialogSqlText"
                        resize="none">
                    </el-input>
                    <span slot="footer">
                        <el-button type="danger" @click="matFileDelSql">删 除
                        </el-button>
                        <el-button type="primary" @click="matFileSaveSql">保
                            存</el-button>
                    </span>
                </el-dialog>
            </div>
            <!-- 卡片body -->
            <div>
                <el-table height="42vh" ref="matFileListRef" :data="matFileBodyTableData" border
                    :row-class-name="matFileBodyTableRowClassName" @current-change="matFileBodyTableHandleCurrentChange"
                    @row-contextmenu="matFileBodyTableRowRClickChange" highlight-current-row>
                    <el-table-column property="type" label="类型">
                    </el-table-column>
                    <el-table-column property="matFileName" label="素材文件名">
                    </el-table-column>
                    <el-table-column property="durationSecond" label="时长(s)">
                    </el-table-column>
                </el-table>

                <!-- 素材文件右键菜单 -->
                <el-card class="box-card" id="matFileRClickMenu" :style="matFileRClickMenuStyle">
                    <el-button size="medium" @click="matFileManageTags">标签管理</el-button>
                    <el-button size="medium" @click="matFileRename">重命名</el-button>
                    <el-button size="medium" @click="matFileDelMatFile">删除</el-button>
                </el-card>

                <!-- 重命名弹窗 -->
                <el-card class="box-card" id="matFileRename" :style="matFileRenameStyle">
                    <el-input placeholder="请输入新文件名" v-model="matFileRenameText" resize="none">
                    </el-input>
                    <el-button type="danger" @click="matFileRenameCancel">取消</el-button>
                    <el-button type="primary" @click="matFileRenameConfirm">确定</el-button>
                </el-card>


                <!-- 标签管理弹窗弹窗 -->
                <el-card class="box-card" id="matFileManageTags" :style="matFileManageTagsStyle">
                    <div class="matFileManageTagEdic">
                        <el-tag :key="tag" v-for="tag in matFileCurTags" closable :disable-transitions="false"
                        @close="metFileCloseTag(tag)">
                        {{tag}}
                    </el-tag>
                    <el-input class="input-new-tag" v-if="metFileTagInputVisible" v-model="metFileTagInputValue" ref="metFileTagInput"
                        size="small" @blur="metFileNewTagConfirm">
                    </el-input>
                    <el-button v-else class="button-new-tag" size="small" @click="metFileTagShowInput">新增</el-button>
                    </div>
                    

                    <el-button class="matFileManageTag" type="danger" @click="matFileManageTagCancel">取消</el-button>
                    <el-button class="matFileManageTag" type="primary" @click="matFileManageTagConfirm">确定</el-button>
                    
                </el-card>
            </div>

        </el-card>
    </div>

</template>


<!-- 预览组件-模板代码 -->
<template id="preTemplate">
    <div id='pre'>
        <el-card class="box-card ">
            <!-- 视频 -->
            <div title="视频" v-if="matFileBodyTableCurrentRow.type == '视频'">
                视频
            </div>
            <!-- 音频 -->
            <div title="音频" v-else-if="matFileBodyTableCurrentRow.type == '音频'" >
                <div id="preAudio">

                </div>
            </div>
            <!-- 图片 -->
            <div title="图片" v-else-if="matFileBodyTableCurrentRow.type == '图片'">
                图片
            </div>
            <div title="none" v-else>
                未选中素材文件
            </div>
        </el-card>
    </div>
</template>

<!-- 信息组件-模板代码 -->
<template id="infoTemplate">
    <div id='info'>
        <el-card class="box-card " style="overflow-y:scroll;overflow-x: visible;">
            <div><span style="color:rgb(51, 51, 255)">id:</span>{{matFileInfo.matfile_id}}</div>
            <div><span style="color:rgb(51, 51, 255)">路径:</span>{{matFileInfo.matfile_full_path}}</div>
            <div><span style="color:rgb(51, 51, 255)">大小(kb):</span>{{matFileInfo.size_kb}}</div>
            <div><span style="color:rgb(51, 51, 255)">创建时间:</span>{{matFileInfo.create_time}}</div>
            <div><span style="color:rgb(51, 51, 255)">标签:</span>{{matFileInfo.tags}}</div>
        </el-card>
    </div>
</template>

<!-- 素材组件-模板代码 -->
<template id="matTemplate">
    <div id='mat'>
        <el-card class="box-card ">
            mat
        </el-card>
    </div>
</template>

<!-- 设置组件-模板代码 -->
<template id="settingTemplate">
    <div id="setting">
        <el-button icon="el-icon-setting" @click="settingDialogVisible = true" circle>
        </el-button>
        <el-dialog title="设置面板" :visible.sync="settingDialogVisible">
            <el-divider content-position='center'>常规操作</el-divider>
            <div class="settingSingleRow" style="display:inline-block;width:20%;text-align:center;">
                <label>素材文件目录:</label>
            </div>
            <el-input type="textarea" resize="none" placeholder="请输入内容" :rows="settingMatFilePath.split('\n').length"
                v-model="settingMatFilePath" @change="settingChangeSettingValue('settingMatFilePath')"
                style="display:inline-block;width:75%; ">
            </el-input>

            <div class="settingSingleRow" style="display:inline-block;width:20%;text-align:center;">
                <label>mogrt目录:</label>
            </div>
            <el-input type="textarea" resize="none" placeholder="请输入内容" :rows="settingMogrtPath.split('\n').length"
                v-model="settingMogrtPath" @change="settingChangeSettingValue('settingMogrtPath')"
                style="display:inline-block;width:75%; ">
            </el-input>


            <el-divider content-position='center'>卡点</el-divider>
            <div class="settingSingleRow" style="display:inline-block;width:20%;text-align:center;">
                <label>卡点时长(ms):</label>
            </div>
            <el-input type="textarea" resize="none" placeholder="请输入内容" :rows="settingFreePointMs.split('\n').length"
                v-model="settingFreePointMs" @change="settingChangeSettingValue('settingFreePointMs')"
                style="display:inline-block;width:75%; ">
            </el-input>
            <div class="settingSingleRow" style="display:inline-block;width:20%;text-align:center;">
                <label>入点快捷键:</label>
            </div>
            <el-input type="textarea" resize="none" placeholder="请输入内容" :rows="settingInPointHotKey.split('\n').length"
                v-model="settingInPointHotKey" @change="settingChangeSettingValue('settingInPointHotKey')"
                style="display:inline-block;width:75%; ">
            </el-input>
            <div class="settingSingleRow" style="display:inline-block;width:20%;text-align:center;">
                <label>变速点快捷键:</label>
            </div>
            <el-input type="textarea" resize="none" placeholder="请输入内容"
                :rows="settingSpeedPointHotKey.split('\n').length" v-model="settingSpeedPointHotKey"
                @change="settingChangeSettingValue('settingSpeedPointHotKey')" style="display:inline-block;width:75%; ">
            </el-input>
            <div class="settingSingleRow" style="display:inline-block;width:20%;text-align:center;">
                <label>出点快捷键:</label>
            </div>
            <el-input type="textarea" resize="none" placeholder="请输入内容" :rows="settingOutPointHotKey.split('\n').length"
                v-model="settingOutPointHotKey" @change="settingChangeSettingValue('settingOutPointHotKey')"
                style="display:inline-block;width:75%; ">
            </el-input>

            <el-divider content-position='center'>转场</el-divider>
            <div class="settingSingleRow" style="display:inline-block;width:20%;text-align:center;">
                <label>转场效果:</label>
            </div>
            <!-- 转场效果下拉框 -->
            <el-select title="转场效果下拉框" size="mini" v-model="settingTransformEffectValue" filterable
                @change="settingChangeSettingValue('settingTransformEffectValue')"
                style="display:inline-block;width:75%; ">
                <el-option v-for="item in settingTransformEffectOptions" :key="item" :label="item" :value="item">
                </el-option>
            </el-select>

            <div class="settingSingleRow" style="display:inline-block;width:20%;text-align:center;">
                <label>转场持续时间(ms):</label>
            </div>
            <el-input type="textarea" resize="none" placeholder="请输入内容"
                :rows="settingTransformEffectMs.split('\n').length" v-model="settingTransformEffectMs"
                @change="settingChangeSettingValue('settingTransformEffectMs')"
                style="display:inline-block;width:75%; ">
            </el-input>

        </el-dialog>
    </div>
</template>
<!-- 自定义工具 -->
<script src="./js/src/tools.js"></script>
<!-- 自定义vue组件 -->
<script src="./js/src/components.js"></script>
<!-- 注册vuex插件 -->
<script src="./js/src/store.js"></script>
<!-- app组件 -->
<script src="./js/src/app.js"></script>

</html>